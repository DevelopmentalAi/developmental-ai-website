{% set page_title = paper.title %}
{% extends "base.html" %}

{% block head %}

{{ super() }}
<meta name="citation_title" content="{{paper.title}}" />

{% for author in paper.authors %}
<meta name="citation_author" content="{{author}}" />
{% endfor %}

<meta name="citation_publication_date" content="{{config.citation_date}}" />
<meta name="citation_conference_title" content="{{config.tagline|striptags|title}}" />
<meta name="citation_inbook_title" content="{{config.proceedings_title}}" />
<meta name="citation_abstract" content="{{paper.abstract}}" />

{% for keyword in paper.keywords %}
<meta name="citation_keywords" content="{{keyword}}" />
{% endfor %}
<meta name="citation_pdf_url" content="{{paper.pdf_url|default('') }}" />

<script type="text/javascript" src="static/js/vis/vis-network.min.js"></script>

{% endblock %}

{% block content %}

<!-- Title -->
<div class="pp-card m-3">
    <div class="card-header">
        <h2 class="card-title main-title text-center">
            {{paper.title}}
        </h2>
        <h3 class="card-subtitle mb-2 text-muted text-center">
            {% for author in paper.authors %}
            <a href="papers.html?author={{author}}" target="_blank"
                data-tippy-content="See all papers authored by {{author}}"
                class="text-muted filterByAuthorLink">{{author}}</a>{{ "," if not loop.last }}
            {% endfor %}
        </h3>
        <p class="text-center" style="margin-bottom: 0px;">
            <span>Keywords:</span>
            {% for keyword in paper.keywords %}
            <a href="papers.html?keyword={{keyword}}" target="_blank"
                data-tippy-content="See all papers with keyword '{{keyword}}'"
                class="text-secondary text-decoration-none filterByKeywordLink">{{keyword}}</a>{{ "," if not loop.last }}
            {% endfor %}
        </p>
        {% if paper.venue != "" %}
        <p class="text-center" style="margin-bottom: 0px;">
            <span>Venue: </span>
            <span class="text-secondary text-decoration-none">{{paper.venue}}</span>
        </p>
        {% endif %}

        <div class="text-center p-3">
            <a class="card-link" target="_blank" href="{{paper.pdf_url}}">
                Paper
            </a>
            {% if paper.code_link != "" %}
            <a href="{{paper.code_link}}" target="_blank" class="card-link">
                Code
            </a>
            {% endif %}
            {% if paper.citation != "" %}
            <a class="card-link" data-toggle="collapse" role="button" href="#citation">
                Citation
            </a>
            {% endif %}
        </div>
    </div>
</div>
<div id="details" class="pp-card m-3">
    <div class="card-body">
        <div class="card-text">
            <div id="abstractExample">
                <p style="font-weight: bolder; font-size: 25px; text-align: center;">Abstract</p>
                {{paper.abstract}}
            </div>
        </div>
        <p></p>
    </div>
</div>
<div id="citation" class="pp-card m-3 collapse">
    <div class="card-body">
        <div class="card-text">
            <span class="font-weight-bold">Citation:</span>
            {{paper.citation}}
        </div>
        <p></p>
    </div>
</div>


<!-- Youtube Video -->
{% if "youtube" in paper.talk_link %}
{{ components.sectionTitleLink("Video", paper.talk_link) }}
<div class="col-md-12 col-xs-12 p-2">
    <iframe style="width: 100%; height: 60vh;" src="{{paper.talk_link}}">
    </iframe>
</div>

{% endif %}

<!-- Project Webpage -->
{% if paper.project_link != "" %}
{{ components.sectionTitleLink("Project Webpage", paper.project_link) }}
<div class="col-md-12 col-xs-12 p-2">
    <iframe style="width: 100%; height: 60vh;" src="{{paper.project_link}}">
    </iframe>
</div>

{% endif %}

<!-- Citation Graph -->
{{ components.sectionTitlePlain("Citation Graph") }}
<div id="mynetwork" style="width: 100%;
  height: 600px;
  border: 1px solid lightgray;"></div>
<script>
    const nodes = new vis.DataSet([
      { id: 1, label: "This paper" },
      { id: 2, label: "Paper 2" },
      { id: 3, label: "Paper 3" },
      { id: 4, label: "Paper 4" },
      { id: 5, label: "Paper 5" },
      { id: 6, label: "Paper 6" },
      { id: 7, label: "Paper 7" },
      { id: 8, label: "Paper 8" },
    ]);

    // create an array with edges
    const edges = new vis.DataSet([
      {
        from: 8,
        to: 1,
        arrows: "to",
        label: "cited by",
        font: { align: "middle" },
        color: "green",
      },
      {
        from: 3,
        to: 1,
        arrows: "to",
        label: "cited by",
        font: { align: "middle" },
        color: "green",
      },
      {
        from: 1,
        to: 2,
        arrows: "to",
        label: "cited by",
        font: { align: "middle" },
        color: "orange",
      },
      {
        from: 6,
        to: 1,
        arrows: "to",
        label: "cited by",
        font: { align: "middle" },
        color: "green",
      },
      {
        from: 4,
        to: 1,
        arrows: "to",
        label: "cited by",
        font: { align: "middle" },
        color: "green",
      },
      {
        from: 1,
        to: 5,
        arrows: "to",
        label: "cited by",
        font: { align: "middle" },
        color: "orange",
      },
      {
        from: 1,
        to: 7,
        arrows: "to",
        label: "cited by",
        font: { align: "middle" },
        color: "orange",
      },
    ]);

    // create a network
    const container = document.getElementById("mynetwork");
    const data = {
      nodes,
      edges,
    };
    const options = {
      nodes: {
        shape: "dot",
        size: 22,
      },
    };
    const network = new vis.Network(container, data, options);
</script>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.4.0/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/tippy.js@6/dist/tippy-bundle.umd.min.js"></script>
<script>
    tippy(".filterByAuthorLink");
    tippy(".filterByKeywordLink");
</script>

<!-- <script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@2.3.200/build/pdf.min.js"></script>
<script src="static/js/modules/pdfRender.js"></script>
<script>
  $(document).ready(() => {
    // render first page of PDF to div
    // PDF name can be bound to variable -- e.g. paper.content.poster_link
    const pdfFile =
      " {{ paper.poster_pdf | default(config.default_poster_pdf) }}";
    initPDFViewer(pdfFile, "#pdf_view");
  });
</script> -->


{% endblock %}
